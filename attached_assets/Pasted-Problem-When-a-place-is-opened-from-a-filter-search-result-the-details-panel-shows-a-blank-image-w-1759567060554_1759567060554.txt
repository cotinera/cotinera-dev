Problem: When a place is opened from a filter/search result, the details panel shows a blank image with an author name chip. I want the review photos to appear under the review that posted them, like Google Maps. The non-filtered path already works.

Objectives

Unify data path on filtered selections

On selecting a place from the filtered results list, always call placesService.getDetails with:
fields: ["place_id","name","formatted_address","photos","rating","user_ratings_total","opening_hours","website","international_phone_number","url","reviews"].

Do not use photos from search result objects; use Details only.

Fix blank image & attribution overlay

Build photo URLs with photo.getUrl({ maxWidth: 1600, maxHeight: 1200 }).

Show author/attribution chips only after the image loads (img.onload); hide chips on error.

If an image fails, skip to the next; if all fail, show a neutral placeholder.

Map photos → reviewers and render under reviews

For each place.photos[i].html_attributions[], parse the contributor name (anchor text).

Build a map: contributorName → [photoUrls].

For each review (from getDetails.reviews), render the review card and, if contributorName matches the review’s author, show a mini photo grid directly under that review (max 4 thumbnails, “+N” badge if more).

If no matching photos, render review without a grid (top carousel still shows all place photos).

Race-proof & cache

Use detailsRequestId to ignore stale responses when switching quickly.

Cache getDetails per place_id for 10–15 min; add a dev flag FORCE_REFRESH_PLACES_PHOTOS to bypass.

A11y & polish

Reviews list is scrollable; thumbnails are keyboard-focusable with alt text “Photo by {author} at {place name}”.

Respect Google html_attributions visually in the corner of thumbnails.

Acceptance checks

Opening a place from a filter populates details via getDetails; no blank photo; no random author chip without an image.

Reviews render with any photos uploaded by that reviewer directly beneath their review card.

The top photo carousel still works (multiple images, arrows/swipe); Street View only used when place.photos is empty.

Rapidly switching between results never shows the wrong photos (thanks to detailsRequestId).

No console errors; UI remains snappy.

Deliverables

Updated filtered-path selection flow (Details fetch, photo URL build, attribution timing).

Review component that optionally renders a per-review photo grid based on contributor matching.

Small parser util for html_attributions → contributor name.

README note: photo mapping limitations (best-effort match via attribution), cache policy, and dev flag.