# System Stack

> Generated by repository analysis on October 12, 2025.

## 1) High-Level Overview

- **App type**: SPA (Single Page Application) with SSR capabilities in development
- **Primary frameworks**: React 18.3.1 + Vite 5.4.9 + TypeScript 5.6.3
- **Backend/runtime**: Node.js (via Nix) + Express 4.21.2
- **Database/cache/message bus**: PostgreSQL (Neon-backed via Replit) + Drizzle ORM 0.38.2
- **Hosting/deployment targets**: Replit (primary), with Nix-based provisioning

## 2) Entry Points & App Topology

- **Frontend entry**: `client/index.html` → `/src/main.tsx` (React root mount)
- **Main application module(s)**: 
  - `client/src/App.tsx` - Main app component with routing
  - `client/src/main.tsx` - React DOM render entry point
- **Backend entry**: `server/index.ts` (Express server with Socket.IO)
- **Public assets**: `client/public/` (served statically in production)
- **Routing (client)**: Wouter 3.3.5 with route definitions in `App.tsx`
  - `/` - Landing page
  - `/auth` - Authentication page
  - `/dashboard` - User dashboard
  - `/trips/:id` - Trip detail view
  - `/trips/:id/calendar` - Trip calendar view
  - `/trips/:id/map` - Trip map view
  - `/trips/:id/spending` - Trip expense tracking
  - `/share/:token` - Shared trip access
- **Routing (server)**: Express.js with routes in `server/routes.ts`
  - REST API endpoints under `/api/*`
  - Auth endpoints under `/api/auth/*`
  - File upload handling via Multer
  - Custom routes: `/api/custom-columns`, `/api/nlp`, `/api/recommendations`

## 3) Frontend Stack

- **Language**: TypeScript 5.6.3
- **Framework & libs**:
  - React 18.3.1 + React DOM 18.3.1
  - Wouter 3.3.5 (routing)
  - TanStack Query 5.60.5 (server state)
  - React Hook Form 7.53.1 + Zod 3.24.1 (forms & validation)
  - @hookform/resolvers 3.10.0
  - Framer Motion 11.13.1 (animations)
  - Date-fns 3.6.0 (date utilities)
- **State mgmt**: TanStack Query for server state, React Context (AuthProvider, TutorialProvider) for app state
- **Styling**: 
  - Tailwind CSS 3.4.14 + PostCSS 8.4.47 + Autoprefixer 10.4.20
  - Tailwind plugins: tailwindcss-animate 1.0.7, @tailwindcss/typography 0.5.15
  - Shadcn UI components (extensive Radix UI primitives)
  - Custom theming via `@replit/vite-plugin-shadcn-theme-json`
  - Theme system with light/dark mode support
- **Bundler/dev server**: Vite 5.4.9 with React plugin (@vitejs/plugin-react 4.3.2)
- **Testing/e2e**: Not explicitly configured (no Jest/Vitest/Cypress/Playwright configs detected)
- **Performance features**: 
  - Code-splitting via Vite
  - Lazy loading for routes
  - Image optimization via Multer (5MB limit, image-only uploads)
- **Browser support / polyfills**: Modern browsers (ESNext target, no explicit polyfills)
- **Google Integrations**:
  - @react-oauth/google 0.12.2 (OAuth)
  - @react-google-maps/api 2.20.5 (Maps)
  - @googlemaps/markerclusterer 2.6.2 (Map clustering)
  - use-places-autocomplete 4.0.1 (Places API)
- **UI Component Libraries**:
  - 20+ Radix UI primitives (@radix-ui/react-*)
  - Lucide React 0.453.0 (icons)
  - React Icons 5.4.0 (additional icons)
  - Sonner 2.0.7 + custom Toaster (notifications)
  - Vaul 1.1.0 (drawer component)
  - CMDK 1.0.0 (command palette)
  - Embla Carousel React 8.3.0
  - Recharts 2.13.0 (charts)
- **Drag & Drop**: @dnd-kit/* (core 6.3.1, sortable 10.0.0, modifiers 9.0.0, utilities 3.2.2)

## 4) Backend & API

- **Runtime**: Node.js (version managed via Nix - replit.nix includes postgresql package)
- **Framework/middleware**: 
  - Express 4.21.2
  - express-session 1.18.1 with memorystore 1.6.7
  - Passport.js 0.7.0 (authentication)
  - Multer 1.4.5-lts.1 (file uploads)
- **Auth**: 
  - Local strategy (email/password with scrypt hashing)
  - Google OAuth 2.0 (passport-google-oauth20 2.0.0)
  - Session-based authentication with 24-hour cookie lifetime
  - Session secret from `REPL_ID` or fallback
- **Sessions/cookies**: 
  - MemoryStore (memorystore 1.6.7)
  - Secure cookies in production (auto mode)
  - SameSite: lax
  - MaxAge: 24 hours
- **Notable endpoints**:
  - `GET /api/trips/:id` – Get trip details with participants, activities, flights, accommodations
  - `GET /api/flights/lookup` – Flight information lookup via AviationStack API
  - `POST /api/auth/login` – Local authentication
  - `GET /api/auth/google` – Google OAuth initiation
  - `GET /api/auth/google/callback` – Google OAuth callback
  - Custom routes via modular routers (custom-columns, nlp, recommendations)
- **Serverless functions**: None (monolithic Express server)
- **Background jobs/queues**: Not configured
- **Real-time**: Socket.IO 4.8.1 (server) + socket.io-client 4.8.1 (frontend) for live trip updates
- **External API Integrations**:
  - SendGrid (@sendgrid/mail 8.1.5) for email
  - OpenAI (openai 4.98.0) for AI recommendations
  - Google APIs (googleapis 154.0.0) for Calendar sync
  - AviationStack API (via AVIATION_STACK_API_KEY env var)

## 5) Data Layer

- **Primary DB**: PostgreSQL (Neon-backed, provided by Replit)
- **ORM/query builder**: Drizzle ORM 0.38.2 with drizzle-zod 0.6.0 for schema validation
- **Migration tool**: Drizzle Kit 0.27.1
  - Migrations directory: `./migrations`
  - Schema file: `./db/schema.ts`
  - Dialect: PostgreSQL
- **Schemas/models overview**:
  - **users**: id (serial PK), email (unique), password, name, username, avatar, provider, provider_id, preferences (jsonb with detailed travel preferences)
  - **trips**: id (serial PK), title, description, location, coordinates (json), startDate, endDate, thumbnail, ownerId (FK to users), viewPreferences (jsonb)
  - **destinations**: id (serial PK), tripId (FK), name, description, startDate, endDate, coordinates, order
  - **participants**: id (serial PK), tripId (FK), userId (FK), name, status, role, email, phone, arrivalDate, departureDate, flightStatus, hotelStatus, accommodationId (FK)
  - **activities**: id (serial PK), tripId (FK), title, description, location, coordinates, startTime, endTime, googleEventId (for Calendar sync)
  - **flights**: id (serial PK), tripId (FK), participantId (FK), direction, airline, flightNumber, departure/arrival airports, dates/times, booking info
  - **accommodations**: id (serial PK), tripId (FK), name, type, address, coordinates, check-in/out dates/times, booking info
  - **expenses**: id (serial PK), tripId (FK), paidBy (FK to users), title, amount, currency, category, date
  - **expenseSplits**: id (serial PK), expenseId (FK), userId (FK), amount, status
  - **repayments**: id (serial PK), tripId (FK), expenseId (FK), paidBy/paidTo (FK to users), amount, currency
  - **pinnedPlaces**: id (serial PK), tripId (FK), name, notes, coordinates, placeId (Google Places), destinationId (FK), category, icon, status
  - **chatMessages**: id (serial PK), tripId (FK), userId (FK), message, createdAt
  - **polls**: id (serial PK), tripId (FK), userId (FK), question, options (json array), endTime, isClosed
  - **pollVotes**: id (serial PK), pollId (FK), userId (FK), optionIndex
  - **shareLinks**: id (serial PK), tripId (FK), token (uuid), expiresAt, isActive, accessLevel
  - **notifications**: id (serial PK), userId/tripId/participantId (FKs), type, title, message, isRead
  - **travelRecommendations**: id (serial PK), userId/tripId (FKs), destinationName, description, activities, interests, budget, scoring, seasonal info, cuisine, cultural highlights
  - **customColumns**: id (serial PK), tripId (FK), name, type, columnId
  - **customValues**: id (serial PK), columnId, participantId (FK), value
  - **googleCalendarSync**: id (serial PK), tripId (FK), calendarId, syncToken, webhook details, lastSyncedAt
  - **tripIdeas**: id (serial PK), tripId (FK), title, description, status, ownerId (FK), location, coordinates, votes, plannedDate/Time
- **Seeds/fixtures**: Test user creation endpoint at `/api/test/create-user` (development only)
- **Caching**: None explicitly configured (in-memory session store only)
- **Files/blob storage**: Local filesystem via Multer (uploads to `server/uploads/` directory)

## 6) Build, Run, Test Commands

| Purpose   | Command           | Source file  |
| --------- | ----------------- | ------------ |
| Dev       | `npm run dev`     | package.json |
| Build     | `npm run build`   | package.json |
| Start     | `npm start`       | package.json |
| Typecheck | `npm run check`   | package.json |
| DB Push   | `npm run db:push` | package.json |

**Command Details**:
- `dev`: Runs `tsx server/index.ts` - starts Express server with hot reload
- `build`: Runs `vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist`
  - Frontend: Vite builds to `dist/public`
  - Backend: esbuild bundles server to `dist/index.js`
- `start`: `NODE_ENV=production node dist/index.js` - runs production build
- `check`: `tsc` - TypeScript type checking (no emit)
- `db:push`: `drizzle-kit push` - push schema changes to database

**Note**: No explicit test, lint, or format commands configured in package.json

## 7) Environment Variables (no secrets)

> Set these in Replit Secrets or deployment provider. Mark **Build-time** vs **Runtime**.

**Backend (Runtime)**:
- `DATABASE_URL` (Runtime, Required) – PostgreSQL connection string for Drizzle ORM
- `GOOGLE_CLIENT_ID` (Runtime, Required) – Google OAuth client ID for authentication
- `GOOGLE_CLIENT_SECRET` (Runtime, Required) – Google OAuth client secret
- `SENDGRID_API_KEY` (Runtime, Optional) – SendGrid API key for email notifications
- `OPENAI_API_KEY` (Runtime, Optional) – OpenAI API key for AI-powered travel recommendations
- `AVIATION_STACK_API_KEY` (Runtime, Optional) – AviationStack API for flight information lookup
- `REPL_ID` (Runtime, Auto-set by Replit) – Used for session secret generation
- `PORT` (Runtime, Optional) – Server port, defaults to 5000
- `NODE_ENV` (Runtime) – Set to 'production' for production builds

**Frontend (Build-time)**:
- `VITE_GOOGLE_CLIENT_ID` (Build-time, Required) – Google OAuth client ID for frontend Google Calendar sync
- `VITE_GOOGLE_MAPS_API_KEY` (Build-time, Required) – Google Maps API key for map integration

## 8) Deployment Targets & CI/CD

- **Targets**: Replit (primary deployment platform)
- **Configuration files**: 
  - `replit.nix` - Nix configuration for Replit environment (includes PostgreSQL)
  - `package.json` scripts for build and start
- **Build output**: 
  - Frontend: `dist/public/` (Vite output)
  - Backend: `dist/index.js` (esbuild bundled server)
- **CI pipelines**: None configured (no .github/workflows, .gitlab-ci.yml, etc.)
- **Docker**: Not configured (Replit uses Nix instead of Docker)
- **Deployment process**:
  1. Replit automatically installs dependencies via npm
  2. Database provisioned via Replit's PostgreSQL integration
  3. Run `npm run db:push` to sync schema
  4. For production: `npm run build` then `npm start`
  5. For development: `npm run dev` (auto-restart on file changes)

## 9) Observability, Security & Compliance

- **Logs/metrics/tracing**: 
  - Basic Express request logging (custom middleware in `server/index.ts`)
  - Logs API requests with duration and response
  - No external observability services configured (Sentry/Datadog/etc.)
- **Security headers/CSP**: Not explicitly configured (relies on Express defaults)
- **Rate limiting/CORS/CSRF**: 
  - No rate limiting configured
  - CORS not explicitly configured (same-origin by default)
  - CSRF protection via session SameSite cookies (lax mode)
- **Dependency scanning/audit**: Not configured (no automated scanning)
- **Data protection**: 
  - Passwords hashed using scrypt with salt
  - Session cookies with secure flag in production
  - Database encryption at rest (provided by Neon/Replit)
  - TLS in transit (provided by Replit deployment)
  - No explicit PII handling policies in code

## 10) Third-Party Services & Integrations

- **Auth providers**: 
  - Google OAuth 2.0 (authentication & calendar access)
  - Local email/password authentication
- **Maps/Location**: 
  - Google Maps JavaScript API (mapping, places, geocoding)
  - Google Places API (autocomplete, place details)
  - Marker clustering for performance
- **Email/SMS**: 
  - SendGrid (email notifications, trip invitations)
  - No SMS provider configured
- **AI/ML**: 
  - OpenAI GPT (travel recommendations, natural language processing)
- **Calendar**: 
  - Google Calendar API (two-way sync for trip activities)
  - Webhook support for real-time updates
- **Flight Data**: 
  - AviationStack API (flight information lookup)
- **Database**: 
  - Neon PostgreSQL (via Replit integration)

## 11) Project Conventions & Tooling

- **Package manager**: npm (package-lock.json v3 present)
- **Code style**: 
  - TypeScript strict mode enabled
  - No explicit ESLint/Prettier configs detected
  - Module system: ESM (type: "module" in package.json)
- **Commit/branching/versioning**: 
  - No conventional commits config detected
  - Version: 1.0.0 in package.json
  - No Git hooks or Husky configuration
- **Monorepo setup**: Not a monorepo (single package.json)
- **Path aliases**:
  - `@db/*` → `./db/*` (database schema and config)
  - `@/*` → `./client/src/*` (frontend code)
- **Import conventions**:
  - Server uses `.js` extensions in imports (ESM compatibility)
  - Client uses TypeScript imports without extensions

## 12) Data Model Diagram (Mermaid)

```mermaid
erDiagram
    users ||--o{ trips : owns
    users ||--o{ participants : "can be"
    users ||--o{ chatMessages : posts
    users ||--o{ expenses : pays
    users ||--o{ notifications : receives
    users ||--o{ travelRecommendations : gets
    
    trips ||--o{ destinations : contains
    trips ||--o{ participants : has
    trips ||--o{ activities : includes
    trips ||--o{ flights : tracks
    trips ||--o{ accommodations : books
    trips ||--o{ expenses : records
    trips ||--o{ chatMessages : has
    trips ||--o{ pinnedPlaces : pins
    trips ||--o{ polls : creates
    trips ||--o{ shareLinks : shares
    trips ||--o{ tripIdeas : brainstorms
    trips ||--|| googleCalendarSync : syncs
    trips ||--o{ customColumns : customizes
    
    participants ||--o{ flights : books
    participants ||--o{ customValues : has
    participants }o--|| accommodations : stays_at
    
    expenses ||--o{ expenseSplits : splits
    expenses ||--o{ repayments : settles
    
    polls ||--o{ pollVotes : receives
    
    destinations ||--o{ pinnedPlaces : contains
    
    users {
        serial id PK
        text email UK
        text password
        text name
        text username
        text avatar
        text provider
        text provider_id
        jsonb preferences
    }
    
    trips {
        serial id PK
        text title
        text description
        date startDate
        date endDate
        integer ownerId FK
        json coordinates
        jsonb viewPreferences
    }
    
    activities {
        serial id PK
        integer tripId FK
        text title
        timestamp startTime
        timestamp endTime
        text googleEventId
        json coordinates
    }
    
    participants {
        serial id PK
        integer tripId FK
        integer userId FK
        text name
        text status
        text role
        date arrivalDate
        date departureDate
    }
    
    expenses {
        serial id PK
        integer tripId FK
        integer paidBy FK
        numeric amount
        text currency
        text category
    }
```

## 13) Dependency Graph (Mermaid)

```mermaid
graph TD
    subgraph Frontend
        React[React 18.3.1]
        Vite[Vite 5.4.9]
        TanStack[TanStack Query 5.60.5]
        Wouter[Wouter 3.3.5]
        Tailwind[Tailwind CSS 3.4.14]
        Shadcn[Shadcn UI / Radix]
        GoogleMaps[@react-google-maps/api]
        GoogleOAuth[@react-oauth/google]
    end
    
    subgraph Backend
        Express[Express 4.21.2]
        Passport[Passport.js 0.7.0]
        SocketIO[Socket.IO 4.8.1]
        Drizzle[Drizzle ORM 0.38.2]
        SendGrid[@sendgrid/mail]
        OpenAI[OpenAI SDK]
    end
    
    subgraph Database
        PostgreSQL[(PostgreSQL/Neon)]
    end
    
    subgraph External_APIs
        GoogleAPIs[Google APIs]
        AviationStack[AviationStack]
        OpenAIAPI[OpenAI API]
        SendGridAPI[SendGrid API]
    end
    
    Vite --> React
    React --> TanStack
    React --> Wouter
    React --> Tailwind
    React --> Shadcn
    React --> GoogleMaps
    React --> GoogleOAuth
    
    Express --> Passport
    Express --> SocketIO
    Express --> Drizzle
    Express --> SendGrid
    Express --> OpenAI
    
    Drizzle --> PostgreSQL
    
    GoogleOAuth --> GoogleAPIs
    GoogleMaps --> GoogleAPIs
    SendGrid --> SendGridAPI
    OpenAI --> OpenAIAPI
    Express --> AviationStack
```

## 14) How to Run Locally

**Prerequisites**: 
- Replit environment (Nix-based) OR
- Node.js 18+ (inferred from package types)
- PostgreSQL database

**Steps**:

1. **Install dependencies**:
   ```bash
   npm install
   ```

2. **Set up environment variables**:
   
   Create a `.env` file or set in Replit Secrets:
   ```bash
   DATABASE_URL=postgresql://user:password@host:port/database
   GOOGLE_CLIENT_ID=your_google_client_id
   GOOGLE_CLIENT_SECRET=your_google_client_secret
   VITE_GOOGLE_CLIENT_ID=your_google_client_id
   VITE_GOOGLE_MAPS_API_KEY=your_google_maps_api_key
   SENDGRID_API_KEY=your_sendgrid_key  # Optional
   OPENAI_API_KEY=your_openai_key      # Optional
   ```

3. **Push database schema**:
   ```bash
   npm run db:push
   ```

4. **Start development server**:
   ```bash
   npm run dev
   ```

5. **Open in browser**:
   - Development: `http://localhost:5000`
   - Replit: Automatically provides web preview URL

**Development Mode**:
- Vite dev server with HMR (Hot Module Replacement)
- Express server with tsx hot reload
- WebSocket support with HMR protocol filtering

## 15) Build & Deploy Steps

**Build for Production**:

1. **Build the application**:
   ```bash
   npm run build
   ```
   This creates:
   - Frontend build: `dist/public/`
   - Backend bundle: `dist/index.js`

2. **Set environment to production**:
   ```bash
   export NODE_ENV=production
   ```

3. **Run database migrations** (if any):
   ```bash
   npm run db:push
   ```

4. **Start production server**:
   ```bash
   npm start
   ```

**Deploy to Replit**:

1. **Configure Replit Secrets**:
   - Add all required environment variables in Replit Secrets panel
   - `DATABASE_URL` is auto-provided if using Replit PostgreSQL

2. **Run command**: 
   - Set run command to `npm run dev` for development
   - Set run command to `npm run build && npm start` for production

3. **Database setup**:
   - Enable PostgreSQL in Replit
   - Run `npm run db:push` in Shell to sync schema

4. **Port configuration**:
   - Application binds to `0.0.0.0:5000`
   - Replit automatically proxies and provides public URL

**Post-deploy checks**:
- Verify database connectivity (`/api/test/create-user` endpoint)
- Test Google OAuth flow (`/auth` page)
- Check WebSocket connection (real-time features)
- Validate Google Maps loading on `/trips/:id/map`

## 16) Known Risks, Assumptions & TODOs

**Assumptions**:
- ✓ Node.js version inferred from dependencies (requires Node 18+ for native fetch)
- ✓ Assumes Replit environment for deployment (replit.nix present)
- ✓ PostgreSQL version determined by Neon/Replit (likely PostgreSQL 14+)
- ✓ No explicit test framework - assume manual testing workflow
- ✓ Production deployments use Replit's built-in features (no custom CI/CD)

**Known Risks**:
- ⚠️ **No rate limiting**: API endpoints vulnerable to abuse
- ⚠️ **MemoryStore sessions**: Will reset on server restart (not suitable for multi-instance deployment)
- ⚠️ **Local file uploads**: Files stored in `server/uploads/` won't persist across Replit restarts
- ⚠️ **No CSP/Security headers**: Missing Content-Security-Policy and other security headers
- ⚠️ **No automated testing**: No unit/integration/e2e tests configured
- ⚠️ **API key exposure**: Frontend env vars (`VITE_*`) are exposed in built JavaScript
- ⚠️ **No error monitoring**: No Sentry/Datadog for production error tracking

**TODOs**:
- [ ] Add `.env.example` file to document required environment variables
- [ ] Configure ESLint + Prettier for code consistency
- [ ] Add rate limiting middleware (express-rate-limit)
- [ ] Implement CSP headers (helmet.js)
- [ ] Set up persistent session store (connect-pg-simple already installed but not used)
- [ ] Configure object storage for file uploads (replace local filesystem)
- [ ] Add test framework (Vitest/Jest + Playwright for e2e)
- [ ] Implement proper error monitoring (Sentry)
- [ ] Add API documentation (Swagger/OpenAPI)
- [ ] Configure production logging (Winston/Pino)
- [ ] Add database backup strategy
- [ ] Implement CORS configuration for API security
- [ ] Add dependency scanning (Dependabot/Snyk)

## Appendix A: Exact Dependencies (by manifest)

**Production Dependencies (package.json)**:
```
@dnd-kit/core: ^6.3.1
@dnd-kit/modifiers: ^9.0.0
@dnd-kit/sortable: ^10.0.0
@dnd-kit/utilities: ^3.2.2
@googlemaps/markerclusterer: ^2.6.2
@hookform/resolvers: ^3.10.0
@jridgewell/trace-mapping: ^0.3.25
@radix-ui/react-accordion: ^1.2.1
@radix-ui/react-alert-dialog: ^1.1.2
@radix-ui/react-aspect-ratio: ^1.1.0
@radix-ui/react-avatar: ^1.1.1
@radix-ui/react-checkbox: ^1.1.2
@radix-ui/react-collapsible: ^1.1.1
@radix-ui/react-context-menu: ^2.2.2
@radix-ui/react-dialog: ^1.1.2
@radix-ui/react-dropdown-menu: ^2.1.2
@radix-ui/react-hover-card: ^1.1.2
@radix-ui/react-label: ^2.1.0
@radix-ui/react-menubar: ^1.1.2
@radix-ui/react-navigation-menu: ^1.2.1
@radix-ui/react-popover: ^1.1.2
@radix-ui/react-progress: ^1.1.0
@radix-ui/react-radio-group: ^1.2.1
@radix-ui/react-scroll-area: ^1.2.0
@radix-ui/react-select: ^2.1.2
@radix-ui/react-separator: ^1.1.0
@radix-ui/react-slider: ^1.2.1
@radix-ui/react-slot: ^1.1.0
@radix-ui/react-switch: ^1.1.1
@radix-ui/react-tabs: ^1.1.1
@radix-ui/react-toast: ^1.2.2
@radix-ui/react-toggle: ^1.1.0
@radix-ui/react-toggle-group: ^1.1.0
@radix-ui/react-tooltip: ^1.1.3
@react-google-maps/api: ^2.20.5
@react-oauth/google: ^0.12.2
@replit/vite-plugin-shadcn-theme-json: ^0.0.4
@sendgrid/mail: ^8.1.5
@tanstack/react-query: ^5.60.5
@types/mongoose: ^5.11.96
@types/multer: ^1.4.12
@types/socket.io: ^3.0.1
axios: ^1.8.4
class-variance-authority: ^0.7.0
clsx: ^2.1.1
cmdk: ^1.0.0
connect-pg-simple: ^10.0.0
date-fns: ^3.6.0
drizzle-orm: ^0.38.2
drizzle-zod: ^0.6.0
embla-carousel-react: ^8.3.0
express: ^4.21.2
express-session: ^1.18.1
framer-motion: ^11.13.1
googleapis: ^154.0.0
input-otp: ^1.2.4
lucide-react: ^0.453.0
memorystore: ^1.6.7
mongoose: ^8.19.0
multer: ^1.4.5-lts.1
openai: ^4.98.0
passport: ^0.7.0
passport-google-oauth20: ^2.0.0
passport-local: ^1.0.0
react: ^18.3.1
react-day-picker: ^8.10.1
react-dom: ^18.3.1
react-hook-form: ^7.53.1
react-icons: ^5.4.0
react-resizable-panels: ^2.1.4
recharts: ^2.13.0
socket.io: ^4.8.1
socket.io-client: ^4.8.1
sonner: ^2.0.7
tailwind-merge: ^2.5.4
tailwindcss-animate: ^1.0.7
use-places-autocomplete: ^4.0.1
vaul: ^1.1.0
wouter: ^3.3.5
ws: ^8.18.0
zod: ^3.24.1
```

**Dev Dependencies (package.json)**:
```
@replit/vite-plugin-runtime-error-modal: ^0.0.3
@tailwindcss/typography: ^0.5.15
@types/express: 4.17.21
@types/express-session: ^1.18.0
@types/node: 20.16.11
@types/passport: ^1.0.16
@types/passport-local: ^1.0.38
@types/react: ^18.3.11
@types/react-dom: ^18.3.1
@types/ws: ^8.5.13
@vitejs/plugin-react: ^4.3.2
autoprefixer: ^10.4.20
drizzle-kit: ^0.27.1
esbuild: ^0.24.0
postcss: ^8.4.47
tailwindcss: ^3.4.14
tsx: ^4.19.1
typescript: 5.6.3
vite: ^5.4.9
```

**Optional Dependencies**:
```
bufferutil: ^4.0.8
```

## Appendix B: File Map (key files only)

```
/
├── client/
│   ├── index.html                    # Frontend entry point
│   ├── src/
│   │   ├── main.tsx                  # React app bootstrap
│   │   ├── App.tsx                   # Main app component with routing
│   │   ├── index.css                 # Global styles and Tailwind imports
│   │   ├── pages/                    # Route components
│   │   ├── components/               # React components
│   │   │   ├── ui/                   # Shadcn UI components
│   │   │   ├── calendar/             # Calendar view components
│   │   │   ├── map-view.tsx          # Google Maps integration
│   │   │   └── shared/               # Shared components
│   │   ├── hooks/                    # Custom React hooks
│   │   └── lib/                      # Utilities and helpers
│   └── public/                       # Static assets
├── server/
│   ├── index.ts                      # Express server entry point
│   ├── routes.ts                     # Main API route definitions
│   ├── auth.ts                       # Authentication setup (Passport)
│   ├── vite.ts                       # Vite dev server integration
│   ├── google-calendar-sync.ts       # Google Calendar sync logic
│   ├── routes/                       # Modular route handlers
│   │   ├── custom-columns.ts         # Custom columns API
│   │   ├── nlp.ts                    # NLP/AI endpoints
│   │   └── recommendations.ts        # Travel recommendations
│   ├── utils/                        # Server utilities
│   │   ├── socket.ts                 # Socket.IO setup
│   │   ├── openai.ts                 # OpenAI integration
│   │   ├── email.ts                  # SendGrid email service
│   │   └── flightApi.ts              # Flight API integration
│   ├── uploads/                      # File upload storage
│   └── migrations/                   # Database migration files
├── db/
│   ├── index.ts                      # Database connection
│   └── schema.ts                     # Drizzle ORM schema definitions
├── migrations/                        # Drizzle Kit migrations
├── vite.config.ts                    # Vite configuration
├── tsconfig.json                     # TypeScript configuration
├── tailwind.config.ts                # Tailwind CSS configuration
├── postcss.config.js                 # PostCSS configuration
├── drizzle.config.ts                 # Drizzle Kit configuration
├── replit.nix                        # Replit environment config
├── package.json                      # npm dependencies and scripts
├── package-lock.json                 # npm lock file
├── replit.md                         # Project documentation
└── theme.json                        # Shadcn theme configuration
```

---

**End of System Stack Documentation**
